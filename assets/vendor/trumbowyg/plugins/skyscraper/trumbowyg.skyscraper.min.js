!function(e){"use strict";var t={article_id:null,article_type:"article",article_lang:"en",json:{}};e.extend(!0,e.trumbowyg,{langs:{en:{skyscraper:"Add Skyscraper Article"}},plugins:{skyscraper:{init:function(r){if(r.o.plugins.skyscraper=e.extend(!0,{},t,r.o.plugins.skyscraper||{}),r.o.plugins.skyscraper.article_type){var a=r.o.plugins.skyscraper.article_type;"news"==a&&(a="pressrelease"),e.ajax({type:"POST",cache:!0,url:base_url+a+"/getAllSkyscraperArticles",data:{articleid:r.o.plugins.skyscraper.article_id,articletype:r.o.plugins.skyscraper.article_type,articlelang:r.o.plugins.skyscraper.article_lang},datatype:"json",success:function(e){t.json=jQuery.parseJSON(e)}})}else e.ajax({type:"POST",cache:!0,url:base_url+"article/getAllSkyscraperArticles",data:{articleid:null,articletype:"article",articlelang:"en"},datatype:"json",success:function(e){t.json=jQuery.parseJSON(e)}});r.addBtnDef("skyscraper",function(r){return{fn:function(){if(hyperLinkLimitExceeded())return!1;r.saveRange();var a=t.json,s='<div class="table-responsive text-left" style="max-height:300px">';s+='<table class="table table-hover table-sm table-bordered">',s+="<thead>",s+="<tr>",s+='<th class="border-left-0">Site</th>',s+='<th class="border-left-0">Type</th>',s+='<th class="">Article Title</th>',s+='<th class="border-right-0"></th>',s+="</tr>",s+="</thead>",s+="<tbody>",e.each(a,function(e,t){s+="<tr>",s+='<td class="border-left-0">'+t.site+"</td>",s+='<td class="border-left-0">'+t.type+"</td>",s+="<td>"+t.title+"</td>",s+='<td class="border-right-0"><a href="#newconsdfds" data-skyscraper="'+t.title+'" data-link="'+t.url+'" class="selected">Select</a></td>',s+="</tr>",s+="<tr>"}),s+="</tbody>",s+="</table>",s+="</div>";var l="Skyscraper Articles";"pillar"!=r.o.plugins.skyscraper.article_type&&"supporting"!=r.o.plugins.skyscraper.article_type||(l="Link To Topic cluster Articles");var c=r.openModal(l,[s].join("\n"));c.find(".trumbowyg-modal-submit").remove(),c.addClass("trumbowyg-modal-skyscraper-box"),c.on("click",".selected",function(t){t.preventDefault();var a=e(this).attr("data-link"),s=e(this).attr("data-skyscraper"),l=e('<a  href="'+a+'" data-skyscraper="'+s+'">'+r.getRangeText()+"</a>")[0];r.range.deleteContents(),r.range.insertNode(l),r.syncCode(),r.$c.trigger("tbwchange"),r.closeModal()}),c.on("tbwconfirm",function(){r.closeModal()}),c.on("tbwcancel",function(){r.closeModal()})}}}(r))}}}})}(jQuery);